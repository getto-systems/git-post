#!/bin/bash

git_post_github(){
	local data
	local result

	data='{"title": "'$current'", "head": "'$current'", "base": "'$head_branch'"}'

	token=token

	git_post_github_post_with_retry
}
git_post_github_post_with_retry(){
	read -p "github personal access token: " token
	git_post_github_post
	echo "$result"
	return
	if [ -z "$(git_post_github_post | head -1 | grep "401 Unauthorized")" ]; then
		echo done
	else
		read -p "github personal access token: " token
		git_post_github_post
		echo done
	fi
}
git_post_github_post(){
	result=$(curl -i -s -H "Authorization: token $token" "https://api.github.com/repos/$destination/pulls" -d "$data")
}
